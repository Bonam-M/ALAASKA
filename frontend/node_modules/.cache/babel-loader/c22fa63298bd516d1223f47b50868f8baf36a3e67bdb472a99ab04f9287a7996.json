{"ast":null,"code":"var _jsxFileName = \"/Users/bonam/Documents/alaaska/alaaska_app/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Login from './Login';\nimport Register from './Register';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BACKEND_URL = \"http://localhost:8000\";\nfunction App() {\n  _s();\n  const [token, setToken] = useState(localStorage.getItem(\"token\") || \"\");\n  const [chatId, setChatId] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [userInput, setUserInput] = useState(\"\");\n  const [conversations, setConversations] = useState([]);\n  const [view, setView] = useState(\"login\"); // \"login\" or \"register\" or \"chat\"\n\n  useEffect(() => {\n    if (token) {\n      axios.get(`${BACKEND_URL}/conversations`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(res => setConversations(res.data)).catch(() => setView(\"login\"));\n    }\n  }, [token]);\n  const sendMessage = () => {\n    if (!userInput) return;\n    axios.post(`${BACKEND_URL}/chat`, {\n      message: userInput,\n      chat_id: chatId\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      setMessages(res.data.history);\n      setChatId(res.data.chat_id);\n      setUserInput(\"\");\n    });\n  };\n  const startNewChat = () => {\n    setChatId(null);\n    setMessages([]);\n  };\n  const loadConversation = c => {\n    axios.get(`${BACKEND_URL}/conversation/${c}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      setMessages(res.data);\n      setChatId(c);\n    });\n  };\n  const deleteConversation = c => {\n    axios.delete(`${BACKEND_URL}/conversation/${c}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(() => {\n      if (c === chatId) {\n        setMessages([]);\n        setChatId(null);\n      }\n      setConversations(conversations.filter(item => item !== c));\n    });\n  };\n  if (!token) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auth-container\",\n      children: view === \"login\" ? /*#__PURE__*/_jsxDEV(Login, {\n        setToken: setToken,\n        setView: setView\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Register, {\n        setView: setView\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        localStorage.removeItem(\"token\");\n        setToken(\"\");\n        setView(\"login\");\n      },\n      children: \"Logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"ALAASKA \\u2013 AI Tutor\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: startNewChat,\n      children: \"\\u2795 New Chat\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sidebar\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Conversations\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), conversations.map(c => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => loadConversation(c),\n          children: c\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => deleteConversation(c),\n          children: \"\\u274C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this)]\n      }, c, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chatbox\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messages\",\n        children: messages.map((msg, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: msg.role,\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: [msg.role, \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 15\n          }, this), \" \", msg.content]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Ask something...\",\n        value: userInput,\n        onChange: e => setUserInput(e.target.value),\n        onKeyDown: e => e.key === 'Enter' && sendMessage()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: sendMessage,\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"c56T0sn5hTfFFo7Gp61TAe9QRnk=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","axios","Login","Register","jsxDEV","_jsxDEV","BACKEND_URL","App","_s","token","setToken","localStorage","getItem","chatId","setChatId","messages","setMessages","userInput","setUserInput","conversations","setConversations","view","setView","get","headers","Authorization","then","res","data","catch","sendMessage","post","message","chat_id","history","startNewChat","loadConversation","c","deleteConversation","delete","filter","item","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","removeItem","map","msg","i","role","content","type","placeholder","value","onChange","e","target","onKeyDown","key","_c","$RefreshReg$"],"sources":["/Users/bonam/Documents/alaaska/alaaska_app/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Login from './Login';\nimport Register from './Register';\n\nconst BACKEND_URL = \"http://localhost:8000\";\n\nfunction App() {\n  const [token, setToken] = useState(localStorage.getItem(\"token\") || \"\");\n  const [chatId, setChatId] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [userInput, setUserInput] = useState(\"\");\n  const [conversations, setConversations] = useState([]);\n  const [view, setView] = useState(\"login\"); // \"login\" or \"register\" or \"chat\"\n\n  useEffect(() => {\n    if (token) {\n      axios.get(`${BACKEND_URL}/conversations`, {\n        headers: { Authorization: `Bearer ${token}` }\n      })\n      .then(res => setConversations(res.data))\n      .catch(() => setView(\"login\"));\n    }\n  }, [token]);\n\n  const sendMessage = () => {\n    if (!userInput) return;\n    axios.post(`${BACKEND_URL}/chat`, {\n      message: userInput,\n      chat_id: chatId\n    }, {\n      headers: { Authorization: `Bearer ${token}` }\n    }).then(res => {\n      setMessages(res.data.history);\n      setChatId(res.data.chat_id);\n      setUserInput(\"\");\n    });\n  };\n\n  const startNewChat = () => {\n    setChatId(null);\n    setMessages([]);\n  };\n\n  const loadConversation = (c) => {\n    axios.get(`${BACKEND_URL}/conversation/${c}`, {\n      headers: { Authorization: `Bearer ${token}` }\n    }).then(res => {\n      setMessages(res.data);\n      setChatId(c);\n    });\n  };\n\n  const deleteConversation = (c) => {\n    axios.delete(`${BACKEND_URL}/conversation/${c}`, {\n      headers: { Authorization: `Bearer ${token}` }\n    }).then(() => {\n      if (c === chatId) {\n        setMessages([]);\n        setChatId(null);\n      }\n      setConversations(conversations.filter(item => item !== c));\n    });\n  };\n\n  if (!token) {\n    return (\n      <div className=\"auth-container\">\n        {view === \"login\" ? (\n          <Login setToken={setToken} setView={setView} />\n        ) : (\n          <Register setView={setView} />\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container\">\n      <button onClick={() => { localStorage.removeItem(\"token\"); setToken(\"\"); setView(\"login\"); }}>Logout</button>\n      <h1>ALAASKA – AI Tutor</h1>\n      <button onClick={startNewChat}>➕ New Chat</button>\n      <div className=\"sidebar\">\n        <h3>Conversations</h3>\n        {conversations.map(c => (\n          <div key={c}>\n            <button onClick={() => loadConversation(c)}>{c}</button>\n            <button onClick={() => deleteConversation(c)}>❌</button>\n          </div>\n        ))}\n      </div>\n      <div className=\"chatbox\">\n        <div className=\"messages\">\n          {messages.map((msg, i) => (\n            <div key={i} className={msg.role}>\n              <strong>{msg.role}:</strong> {msg.content}\n            </div>\n          ))}\n        </div>\n        <input\n          type=\"text\"\n          placeholder=\"Ask something...\"\n          value={userInput}\n          onChange={e => setUserInput(e.target.value)}\n          onKeyDown={e => e.key === 'Enter' && sendMessage()}\n        />\n        <button onClick={sendMessage}>Send</button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}